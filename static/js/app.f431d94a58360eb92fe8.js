webpackJsonp([21],{"22WN":function(t,e){},"3JdX":function(t,e){},"4ml/":function(t,e){},"4u+u":function(t,e){},"4wji":function(t,e){},IcnI:function(t,e,n){"use strict";var i=n("7+uW"),r=n("NYxO"),a={nav_height:function(t){return t.app.nav_height},token:function(t){return t.user.token}},o={state:{nav_height:0},mutations:{SET_NAV_HEIGHT:function(t,e){t.nav_height=e}},actions:{setHeight:function(t,e){(0,t.commit)("SET_NAV_HEIGHT",e.height)}}},u=n("//Fk"),s=n.n(u),c=n("TIfe"),l={state:{token:Object(c.a)()},mutations:{SET_TOKEN:function(t,e){t.token=e}},actions:{Login_token:function(t,e){var n=t.commit,i=e.token;return new s.a(function(t,e){i?(Object(c.c)(i),n("SET_TOKEN",i),t()):e("token:undefind")})},FedLogOut:function(t){var e=t.commit;return new s.a(function(t){e("SET_TOKEN",""),Object(c.b)(),t()})},LogOut:function(t){t.commit,t.state;return new s.a(function(t,e){})}}};i.a.use(r.a);var h=new r.a.Store({modules:{app:o,user:l},getters:a});e.a=h},N9P1:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},a=n("VU/8")({name:"App"},r,!1,null,null,null).exports,o=n("/ocq"),u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-main"},[e("router-view",{key:this.key})],1)},staticRenderFns:[]};var s=n("VU/8")({name:"AppMain",computed:{key:function(){return this.$route.fullPath}}},u,!1,function(t){n("3JdX")},"data-v-19a2dd8f",null).exports,c=n("uk2G"),l=n.n(c),h={name:"Navbar",data:function(){return{active:0,icon:{active:"https://img.yzcdn.cn/vant/user-active.png",inactive:"https://img.yzcdn.cn/vant/user-inactive.png"}}},methods:{isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},initHeight:function(){var t=document.getElementById("tabbar");this.$store.dispatch("setHeight",{height:t.offsetHeight})}},mounted:function(){var t=l()(),e=document.getElementById("tabbar");this.isWeiXin()&&this.initHeight();var n=this;t.listenTo(e,function(t){n.$nextTick(function(){n.$store.dispatch("setHeight",{height:t.offsetHeight})})})}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("van-tabbar",{attrs:{id:"tabbar","active-color":"#7e3330","inactive-color":"#000",route:""}},[e("van-tabbar-item",{attrs:{replace:"",to:"/home",icon:"iconshangcheng","icon-prefix":"iconfont iconshangcheng"}},[this._v("商城")]),this._v(" "),e("van-tabbar-item",{attrs:{replace:"",to:"/shoppingCart",icon:"icongouwuche","icon-prefix":"iconfont icongouwuche"},on:{click:this.initHeight}},[this._v("购物车")]),this._v(" "),e("van-tabbar-item",{attrs:{replace:"",to:"/personal",icon:"iconwode","icon-prefix":"iconfont iconwode"}},[this._v("我的")])],1)},staticRenderFns:[]};var p={components:{AppMain:s,Navbar:n("VU/8")(h,d,!1,function(t){n("Umcn")},"data-v-5932b64e",null).exports},props:{},data:function(){return{}},watch:{},computed:{},methods:{},created:function(){},mounted:function(){}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-container"},[e("app-main"),this._v(" "),e("Navbar")],1)},staticRenderFns:[]};var m=n("VU/8")(p,f,!1,function(t){n("22WN")},"data-v-44f8ce5c",null).exports;i.a.use(o.a);var v=[{path:"/",redirect:"/home"},{path:"*",redirect:{name:"home"},component:m,children:[{path:"home",name:"home",meta:{title:"中医文献馆文创商城"},component:function(){return n.e(9).then(n.bind(null,"FP3a"))}},{path:"personal",name:"personal",meta:{title:"我的",requiresAuth:!0},component:function(){return n.e(0).then(n.bind(null,"9dvs"))}},{path:"shoppingCart",name:"shoppingCart",meta:{title:"购物车"},component:function(){return n.e(11).then(n.bind(null,"NOIT"))}}]},{path:"/search",name:"search",meta:{title:"搜索"},component:function(){return n.e(7).then(n.bind(null,"ar59"))}},{path:"/orders/list/:id",name:"ordersList",meta:{title:"订单",requiresAuth:!0},component:function(){return n.e(19).then(n.bind(null,"OXuE"))}},{path:"/orders/confirm",name:"confirmOrders",meta:{title:"确认订单",requiresAuth:!0},component:function(){return n.e(15).then(n.bind(null,"esXr"))}},{path:"/orders/info",name:"confirmInfo",meta:{title:"订单详情",requiresAuth:!0},component:function(){return n.e(5).then(n.bind(null,"zBK8"))}},{path:"/goods",name:"goods",meta:{title:"商品列表"},component:function(){return n.e(4).then(n.bind(null,"WcB/"))}},{path:"/goods/info",name:"goodsInfo",meta:{title:"商品详情"},component:function(){return n.e(16).then(n.bind(null,"x8yo"))}},{path:"/pay",name:"pay",meta:{title:"支付结果",requiresAuth:!0},component:function(){return n.e(6).then(n.bind(null,"BLkF"))}},{path:"/logistics/info",name:"logisticsInfo",meta:{title:"查看物流",requiresAuth:!0},component:function(){return n.e(12).then(n.bind(null,"DP9X"))}},{path:"/logistics",name:"logistics",meta:{title:"交易物流",requiresAuth:!0},component:function(){return n.e(14).then(n.bind(null,"GO/K"))}},{path:"/ambassador",name:"ambassador",meta:{title:"推广大使",requiresAuth:!0},component:function(){return n.e(18).then(n.bind(null,"oDXO"))}},{path:"/ambassador/discounts/info",name:"ambassadorDiscountsInfo",meta:{title:"优惠码详情",requiresAuth:!0},component:function(){return n.e(3).then(n.bind(null,"4tfE"))}},{path:"/ambassador/brokerage/info",name:"ambassadorBrokerageInfo",meta:{title:"佣金提取明细",requiresAuth:!0},component:function(){return n.e(13).then(n.bind(null,"Y53H"))}},{path:"/ambassador/brokerage/extract",name:"ambassadorBrokerageExtract",meta:{title:"佣金提取",requiresAuth:!0},component:function(){return n.e(1).then(n.bind(null,"3t86"))}},{path:"/bankcard",name:"bankcard",meta:{title:"选择银行卡",requiresAuth:!0},component:function(){return n.e(8).then(n.bind(null,"n75P"))}},{path:"/bankcard/create",name:"bankcardCreate",meta:{title:"添加银行卡",requiresAuth:!0},component:function(){return n.e(17).then(n.bind(null,"h0wB"))}},{path:"/address",name:"address",meta:{title:"收货地址",requiresAuth:!0},component:function(){return n.e(10).then(n.bind(null,"sTZ8"))}},{path:"/address/create",name:"addressCreate",meta:{title:"完善信息",requiresAuth:!0},component:function(){return n.e(2).then(n.bind(null,"BBk2"))}}],g=new o.a({mode:"history",routes:v}),b=n("IcnI"),y={components:{},props:{width:{type:String,default:"auto"},value:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""}},data:function(){return{}},watch:{},computed:{},methods:{updateVal:function(t){this.$emit("input",t)}},created:function(){},mounted:function(){}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-input"},[n("input",{style:{width:t.width},attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.updateVal(e.target.value)}}})])},staticRenderFns:[]};var _=n("VU/8")(y,w,!1,function(t){n("4wji")},"data-v-08066ca8",null).exports,I={methods:{dispatch:function(t,e,n){for(var i=this.$parent||this.$root,r=i.$options.name;i&&(!r||r!==t);)(i=i.$parent)&&(r=i.$options.name);i&&i.$emit.apply(i,[e].concat(n))}}},x={mixins:[I],props:{max:{type:String,default:""},state:{type:Boolean,default:!1},rightIcon:{type:String,default:""},readonly:{type:Boolean,default:!1},value:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""}},data:function(){return{currentValue:this.value,id:this.label}},watch:{value:function(t){this.max?t<=Number(this.max)?this.currentValue=t:this.currentValue=this.max:this.currentValue=t}},computed:{},methods:{handleChange:function(t){this.max?t<=Number(this.max)?this.currentValue=t:this.currentValue=this.max:this.currentValue=t},handleInput:function(t){var e=t.target.value;this.currentValue=e,this.$emit("input",e),this.dispatch("ShopItem","form-change",e)},handleBlur:function(){this.dispatch("ShopItem","form-blur",this.currentValue)}},created:function(){},mounted:function(){this.$parent.labelFor&&(this.$refs.input.id=this.$parent.labelFor)}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.state?"shop-input-err":"shop-input"},[t.readonly?n("input",{ref:"input",attrs:{type:t.type,placeholder:t.placeholder,readonly:"readonly"},domProps:{value:t.currentValue},on:{input:t.handleInput,blur:t.handleBlur,change:function(e){return t.handleChange(t.currentValue)}}}):n("input",{ref:"input",attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.currentValue},on:{input:t.handleInput,blur:t.handleBlur,change:function(e){return t.handleChange(t.currentValue)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.rightIcon,expression:"rightIcon"}],staticClass:"rightIcon"},[n("i",{class:"iconfont "+t.rightIcon})])])},staticRenderFns:[]};var k=n("VU/8")(x,F,!1,function(t){n("4u+u")},"data-v-557a105a",null).exports,V=n("bOdI"),S=n.n(V),E=n("zfZg"),$={name:"ShopItem",mixins:[I],inject:["form"],props:{label:{type:String,default:""},prop:{type:String}},data:function(){return{isRequired:!1,isShowMes:!1,message:"",labelFor:"input"+(new Date).valueOf()}},mounted:function(){this.prop&&(this.dispatch("ShopForm","form-add",this),this.initialValue=this.fieldValue,this.setRules())},beforeDestroy:function(){this.dispatch("ShopForm","form-remove",this)},computed:{fieldValue:function(){return this.form.model[this.prop]}},methods:{setRules:function(){var t=this,e=this.getRules();e.length&&e.forEach(function(e){void 0!==e.required&&(t.isRequired=e.required)}),this.$on("form-blur",this.onFieldBlur),this.$on("form-change",this.onFieldChange)},getRules:function(){var t=this.form.rules;return t=t?t[this.prop]:[]},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||-1!==e.trigger.indexOf(t)})},validate:function(t,e){var n=this,i=this.getFilteredRule(t);if(!i||0===i.length)return!0;var r=new E.a(S()({},this.prop,i)),a=S()({},this.prop,this.fieldValue);r.validate(a,{firstFields:!0},function(t){n.isShowMes=!!t,n.message=t?t[0].message:"",e&&e(n.message)})},resetField:function(){this.message="",this.form.model[this.prop]=this.initialValue},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validate("change")}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-item"},[n("label",{directives:[{name:"show",rawName:"v-show",value:t.label,expression:"label"}],class:t.isShowMes?"label err":"label default",attrs:{for:t.labelFor}},[t._v(t._s(t.label))]),t._v(" "),t._t("valid",null,{valid:t.isShowMes})],2)},staticRenderFns:[]};var A=n("VU/8")($,q,!1,function(t){n("ViFe")},"data-v-8d7018fa",null).exports,N=n("//Fk"),O=n.n(N),C={name:"ShopForm",data:function(){return{fields:[]}},props:{model:{type:Object},rules:{type:Object}},provide:function(){return{form:this}},methods:{resetFields:function(){this.fields.forEach(function(t){return t.resetField()})},validate:function(t){var e=this;return new O.a(function(n){var i=!0,r=0;e.fields.forEach(function(a){a.validate("",function(a){a&&(i=!1),++r===e.fields.length&&(n(i),"function"==typeof t&&t(i))})})})}},created:function(){var t=this;this.$on("form-add",function(e){e&&t.fields.push(e)}),this.$on("form-remove",function(e){e.prop&&t.fields.splice(t.fields.indexOf(e),1)})}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},staticRenderFns:[]},T=n("VU/8")(C,R,!1,null,null,null).exports,B=(n("N9P1"),n("NWtE"),n("Fd2+")),H=(n("4ml/"),n("Xxa5")),U=n.n(H),j=n("exGp"),P=n.n(j),M=n("TIfe"),W="文创商城";var X={uri:"https://sso.qstcm.com",ID:"93083627-ecd7-4560-9b1a-ebfa4aabfbb6"};var D,L=function(t,e){var n,i,r,a=X.uri,o=X.ID,u=window.location.href;t.query.token?b.a.dispatch("Login_token",{token:decodeURIComponent(t.query.token)}).then(function(){e({path:t.path,query:{},replace:!0})}):(n=a,i=encodeURIComponent(u.match(/(\w+):\/\/([^/:]+)(:\d*)?/)[0]+t.path),r=o,window.location.href=n+"?redirect_url="+i+"&agentID="+r)},z=this;g.beforeEach((D=P()(U.a.mark(function t(e,n,i){return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:document.title=(n=e.meta.title)?""+n:""+W,e.matched.some(function(t){return t.meta.requiresAuth})?Object(M.a)()?i():L(e,i):i();case 3:case"end":return t.stop()}var n},t,z)})),function(t,e,n){return D.apply(this,arguments)})),i.a.component("IntervalInput",_),i.a.component("ShopInput",k),i.a.component("ShopItem",A),i.a.component("ShopForm",T),i.a.use(B.c),i.a.use(B.a,{lazyComponent:!0}),i.a.config.productionTip=!1,new i.a({el:"#app",router:g,store:b.a,components:{App:a},template:"<App/>"})},NWtE:function(t,e){},TIfe:function(t,e,n){"use strict";e.a=function(){return r.a.get(a)},e.c=function(t){return r.a.set(a,t)},e.b=function(){return r.a.remove(a)};var i=n("lbHh"),r=n.n(i),a="Agent-Token"},Umcn:function(t,e){},ViFe:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f431d94a58360eb92fe8.js.map